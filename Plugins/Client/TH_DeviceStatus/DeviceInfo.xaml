<UserControl x:Class="TH_StatusTable.DeviceInfo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:TH_StatusTable"
             
             xmlns:th_wpf="clr-namespace:TH_WPF;assembly=TH_WPF"
             xmlns:controls="clr-namespace:TH_StatusTable.Controls"
             
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.Resources>

        <ImageBrush x:Key="Power_IMG" Stretch="Uniform" ImageSource="/TH_StatusTable;component/Resources/Power_01.png"  />

        <ImageBrush x:Key="Alert_IMG" Stretch="Uniform" ImageSource="/TH_StatusTable;component/Resources/Warning_01.png"  />

    </UserControl.Resources>

    <Grid Height="65">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="30"/>
            <ColumnDefinition Width="1"/>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="1"/>
            <ColumnDefinition Width="75"/>
            <ColumnDefinition Width="1"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!--Device Status-->
        <Border>
            <Border.Style>
                <Style TargetType="Border">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Production}" Value="true">
                            <Setter Property="Background" Value="{StaticResource StatusGreen}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Idle}" Value="true">
                            <Setter Property="Background" Value="{StaticResource StatusYellow}"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Alert}" Value="true">
                            <Setter Property="Background" Value="{StaticResource StatusRed}"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>


            <!--Status Image-->
            <Rectangle HorizontalAlignment="Center" VerticalAlignment="Center" Fill="White">
                <Rectangle.Style>
                    <Style TargetType="Rectangle">
                        <Setter Property="Height" Value="20"/>
                        <Setter Property="Width" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}}"/>
                        <Setter Property="Margin" Value="0"/>
                        <Setter Property="OpacityMask" Value="{StaticResource Power_IMG}"/>
                        <Setter Property="Opacity" Value="0"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Alert}" Value="true">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:1.0" Storyboard.TargetProperty="Opacity" From="0" To="1" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:1.0" Storyboard.TargetProperty="Opacity" From="1" To="0" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Available}" Value="true">
                                <Setter Property="OpacityMask" Value="{StaticResource Alert_IMG}"/>
                            </DataTrigger>
                            <Trigger Property="Opacity" Value="0">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Rectangle.Style>
            </Rectangle>

        </Border>

        <Rectangle Grid.Column="1" Fill="{StaticResource Shade_Normal}" Width="1"/>

        <!--Description-->
        <Grid Grid.Column="2" Background="Transparent">

            <Grid.ToolTip>
                <StackPanel Margin="10" Width="300">
                    <StackPanel.Resources>
                        <Style TargetType="TextBlock">
                            <Setter Property="FontSize" Value="12"/>
                            <Setter Property="Margin" Value="0,2"/>
                            <Setter Property="HorizontalAlignment" Value="Left"/>
                        </Style>
                    </StackPanel.Resources>


                    <!--Manufacturer Logo-->
                    <th_wpf:ImageDisplay Image="{Binding ManufacturerLogo}" Padding="5" MaxHeight="60" MaxWidth="150" HorizontalAlignment="Left"/>

                    <TextBlock Text="{Binding Description.Description}" Foreground="{StaticResource Foreground_Normal}" FontSize="14" TextWrapping="Wrap"/>

                    <TextBlock>
                        <Run Text="Manufacturer :" Foreground="{StaticResource Foreground_Light}"/>
                        <Run Text="{Binding Description.Manufacturer}" Foreground="{StaticResource Foreground_Normal}"/>
                    </TextBlock>

                    <TextBlock>
                        <Run Text="Model :" Foreground="{StaticResource Foreground_Light}"/>
                        <Run Text="{Binding Description.Model}" Foreground="{StaticResource Foreground_Normal}"/>
                    </TextBlock>

                    <TextBlock>
                        <Run Text="Serial :" Foreground="{StaticResource Foreground_Light}"/>
                        <Run Text="{Binding Description.Serial}" Foreground="{StaticResource Foreground_Normal}"/>
                    </TextBlock>

                    <TextBlock>
                        <Run Text="Controller :" Foreground="{StaticResource Foreground_Light}"/>
                        <Run Text="{Binding Description.Controller}" Foreground="{StaticResource Foreground_Normal}"/>
                    </TextBlock>


                    <TextBlock>
                        <Run Text="Location :" Foreground="{StaticResource Foreground_Light}"/>
                        <Run Text="{Binding Description.Location}" Foreground="{StaticResource Foreground_Normal}"/>
                    </TextBlock>

                </StackPanel>
            </Grid.ToolTip>

            <Grid.RowDefinitions>
                <RowDefinition>
                    <RowDefinition.Style>
                        <Style TargetType="RowDefinition">
                            <Setter Property="Height" Value="6*"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ManufacturerLogo}" Value="{x:Null}">
                                    <Setter Property="Height" Value="0"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </RowDefinition.Style>
                </RowDefinition>
                <RowDefinition Height="4*"/>
            </Grid.RowDefinitions>


            <!--Manufacturer Logo-->
            <th_wpf:ImageDisplay Image="{Binding ManufacturerLogo}" Padding="10,5" MaxHeight="40"/>


            <!--Device Description-->
            <TextBlock Grid.Row="1" Text="{Binding DeviceDescription}" Foreground="{StaticResource Foreground_Normal}" FontSize="12" Margin="0,2" TextAlignment="Center" VerticalAlignment="Center" HorizontalAlignment="Center"/>


        </Grid>

        <Rectangle Grid.Column="3" Fill="{StaticResource Shade_Normal}" Width="1"/>
        
        <!--Device Id-->
        <Viewbox Grid.Column="4" Margin="10">
            <TextBlock Text="{Binding Description.Device_ID}" Foreground="{StaticResource Foreground_Normal}" TextWrapping="Wrap" TextAlignment="Center"/>
        </Viewbox>

        <Rectangle Grid.Column="5" Fill="{StaticResource Shade_Normal}" Width="1"/>
        
        <UniformGrid Grid.Column="6" Columns="24">

            <controls:BetterCell HourData="{Binding HourDatas[0]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[1]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[2]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[3]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[4]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[5]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[6]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[7]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[8]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[9]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[10]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[11]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[12]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[13]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[14]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[15]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[16]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[17]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[18]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[19]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[20]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[21]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[22]}"/>
            <controls:BetterCell HourData="{Binding HourDatas[23]}"/>

        </UniformGrid>
        
    </Grid>

</UserControl>