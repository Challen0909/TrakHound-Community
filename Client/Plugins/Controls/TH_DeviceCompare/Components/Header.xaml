<!--Copyright (c) 2015 Feenux LLC, All Rights Reserved.-->

<!--This file is subject to the terms and conditions defined in-->
<!--file 'LICENSE.txt', which is part of this source code package.-->

<UserControl x:Class="TH_DeviceCompare.Components.Header"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             
             xmlns:TH_WPF="clr-namespace:TH_WPF;assembly=TH_WPF"
             
             mc:Ignorable="d" 

             Width="200"                      
             >

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/TH_Styles;component/All.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid MouseEnter="Control_MouseEnter" MouseLeave="Control_MouseLeave" PreviewMouseDown="Control_MouseDown">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>

        <Grid.RenderTransform>
            <TranslateTransform />
        </Grid.RenderTransform>

        <Grid.Style>
            <Style TargetType="Grid">
                <Setter Property="Background" Value="#00000000"/>
                <Setter Property="Height" Value="180"/>
                <!--<Setter Property="Height" Value="300"/>-->
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Minimized}" Value="true">
                        <!--<Setter Property="Height" Value="180"/>-->
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Duration="00:00:0.5" Storyboard.TargetProperty="Height" From="300" To="180" Timeline.DesiredFrameRate="30">
                                        <DoubleAnimation.EasingFunction>
                                            <CubicEase EasingMode="EaseOut"/>
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                        <DataTrigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard >
                                    <DoubleAnimation Duration="00:00:0.5" Storyboard.TargetProperty="Height" From="180" To="300" Timeline.DesiredFrameRate="30">
                                        <DoubleAnimation.EasingFunction>
                                            <CubicEase EasingMode="EaseOut"/>
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.ExitActions>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding MouseOver}" Value="true">
                        <Setter Property="Background" Value="#10ffffff"/>
                        <!--<DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="Background.Color" To="#10ffffff"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                        <DataTrigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard FillBehavior="Stop">
                                    <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="Background.Color" To="#00000000"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.ExitActions>-->
                    </DataTrigger>
                    <DataTrigger Binding="{Binding IsSelected}" Value="true">
                        <Setter Property="Background" Value="#18ffffff"/>
                        <!--<DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="Background.Color" To="#18ffffff"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                        <DataTrigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard FillBehavior="Stop">
                                    <ColorAnimation Duration="0:0:0.1" Storyboard.TargetProperty="Background.Color" To="#00000000"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.ExitActions>-->
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition >
                    <RowDefinition.Style>
                        <Style TargetType="RowDefinition">
                            <Setter Property="Height" Value="3*"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Device_Image}" Value="{x:Null}">
                                    <Setter Property="Height" Value="*"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </RowDefinition.Style>
                </RowDefinition>
                <RowDefinition Height="auto" />
                <RowDefinition >
                    <RowDefinition.Style>
                        <Style TargetType="RowDefinition">
                            <Setter Property="Height" Value="7*"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Device_Image}" Value="{x:Null}">
                                    <Setter Property="Height" Value="auto"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </RowDefinition.Style>
                </RowDefinition>
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            
            <!--Last Updated Timestamp-->
            <TextBlock Grid.Row="0" Foreground="#33000000" FontSize="8pt" Margin="5,2" HorizontalAlignment="Right">
                <Run Text="Last Updated : "/>
                <Run Text="{Binding LastUpdatedTimestamp}"/>
            </TextBlock>

            <!--Device Logo-->
            <Image Grid.Row="1" Source="{Binding Device_Logo}" Margin="10,5" HorizontalAlignment="Center" VerticalAlignment="Center" MaxHeight="50">
                <Image.Style>
                    <Style TargetType="Image">
                        <Setter Property="Visibility" Value="Visible"/>
                        <Setter Property="Opacity" Value="0.75"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding MouseOver}" Value="True">
                                <Setter Property="Opacity" Value="0.75"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                <Setter Property="Opacity" Value="1.0"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Connected}" Value="false">
                                <Setter Property="Opacity" Value="0.3"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Device_Logo}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>

            <!--Device Description-->
            <TextBlock Grid.Row="2" Text="{Binding Device_Description}" FontSize="10pt" FontWeight="Bold" Margin="10,5,10,0" TextAlignment="Center" Foreground="#fff"/>

            <!--Device Image and Info-->
            <Grid Grid.Row="3">

                <!--Device Image-->
                <Image Source="{Binding Device_Image}" Margin="5" HorizontalAlignment="Center" VerticalAlignment="Top" MaxWidth="160">
                    <Image.Effect>
                        <DropShadowEffect Direction="225" Color="#33000000" ShadowDepth="2" BlurRadius="5" Opacity="0.3"/>
                    </Image.Effect>
                    <Image.Style>
                        <Style TargetType="Image">
                            <Setter Property="Opacity" Value="0.75"/>
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Minimized}" Value="false">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding MouseOver}" Value="True">
                                    <Setter Property="Opacity" Value="0.75"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                    <Setter Property="Opacity" Value="1.0"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Connected}" Value="false">
                                    <Setter Property="Opacity" Value="0.3"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>

                <!--Device Info-->
                <StackPanel Margin="10" VerticalAlignment="Bottom">

                    <TextBlock Text="{Binding Device_Model}" FontSize="8pt" Foreground="#aaffffff"/>

                    <TextBlock Text="{Binding Device_Serial}" FontSize="8pt" Foreground="#aaffffff"/>

                </StackPanel>

                <!--Device ID-->
                <TextBlock Text="{Binding Device_ID}" 
                                   FontSize="45pt"
                                   TextAlignment="Right" VerticalAlignment="Bottom" Foreground="#33ffffff"
                                   Margin="5,0"/>

            </Grid>

            <!--Break Indicator-->
            <Grid Grid.Row="4" Background="#33ffffff">

                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid.RenderTransform>
                    <TranslateTransform Y="41"/>
                </Grid.RenderTransform>

                <Grid.Style>
                    <Style TargetType="Grid">
                        <Setter Property="Height" Value="0"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Break}" Value="true">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.75" Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)" From="41" To="0" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.75" Storyboard.TargetProperty="Height" From="0" To="40" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.3" Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)" From="0" To="41" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseIn"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.75" Storyboard.TargetProperty="Height" From="40" To="0" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>

                <!--Seperator-->
                <Rectangle Grid.Row="0" Fill="#66ffffff" Height="1" />

                <!--Break and Time Display-->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!--Break Text-->
                    <TextBlock Text="On Break" FontSize="16pt" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#aaffffff" Margin="10,0,10,5"/>

                    <!--Time Text-->
                    <TextBlock Grid.Column="1" Text="(6:00 - 6:30)" Margin="5,0,5,5" FontSize="10pt" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#aaffffff"/>

                </Grid>

            </Grid>

            <!--Alert Indicator-->
            <Grid Grid.Row="5" Background="Red">
                
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                
                <Grid.RenderTransform>
                    <TranslateTransform Y="41"/>
                </Grid.RenderTransform>
                
                <Grid.Style>
                    <Style TargetType="Grid">
                        <Setter Property="Height" Value="0"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Alert}" Value="true">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.75" Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)" From="41" To="0" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.75" Storyboard.TargetProperty="Height" From="0" To="40" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.3" Storyboard.TargetProperty="RenderTransform.(TranslateTransform.Y)" From="0" To="41" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseIn"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Duration="00:00:0.75" Storyboard.TargetProperty="Height" From="40" To="0" >
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Grid.Style>

                <!--Seperator-->
                <Rectangle Grid.Row="0" Fill="#66ffffff" Height="1" />
                               
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/> 
                    </Grid.ColumnDefinitions>

                    <!--Alert Indicator-->
                    <Rectangle Grid.Column="0" Height="40" Width="40" HorizontalAlignment="Left" VerticalAlignment="Center" Fill="White">
                        <Rectangle.Resources>
                            <ImageBrush x:Key="IMG"  Stretch="Uniform" ImageSource="/TH_DeviceCompare;component/Resources/Warning_01_40px.png"  />
                        </Rectangle.Resources>
                        <Rectangle.Style>
                            <Style TargetType="Rectangle">
                                <Setter Property="OpacityMask" Value="{StaticResource IMG}"/>
                            </Style>
                        </Rectangle.Style>
                    </Rectangle>
                    
                    <!--Alert Text-->
                    <TextBlock Grid.Column="1" FontSize="14pt" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White" TextWrapping="WrapWithOverflow">
                        Alert                    
                    </TextBlock>

                </Grid>

                
                
                

                <!--<TH_WPF:ProductionIndicator Grid.Column="1" ProductionLevel="{Binding ProductionLevel}"
                                                ProductionLevelCount="{Binding ProductionLevelCount}"
                                                HorizontalAlignment="Right" VerticalAlignment="Bottom"
                                                Margin="10,5" MinHeight="30"/>-->

            </Grid>

        </Grid>

        <Rectangle Grid.Column="1" Width="1" Fill="#66ffffff"/>

    </Grid>

</UserControl>
